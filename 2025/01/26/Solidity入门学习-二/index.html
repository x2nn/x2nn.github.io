<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="æ§åˆ¶æµ è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å°†ä»‹ç»Solidityä¸­çš„æ§åˆ¶æµã€‚ æµ‹è¯•ä»£ç Control.solï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&#x2F;&#x2F; SPDX-License-Identifier: MITpragma solidity ^0.8.21;contra">
<meta property="og:type" content="article">
<meta property="og:title" content="Solidityå…¥é—¨å­¦ä¹ (äºŒ)">
<meta property="og:url" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/index.html">
<meta property="og:site_name" content="X2n.">
<meta property="og:description" content="æ§åˆ¶æµ è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å°†ä»‹ç»Solidityä¸­çš„æ§åˆ¶æµã€‚ æµ‹è¯•ä»£ç Control.solï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&#x2F;&#x2F; SPDX-License-Identifier: MITpragma solidity ^0.8.21;contra">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126150027700.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126150311002.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126150255810.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126150540552.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126150740601.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126183129690.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126185114449.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126213523593.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126213416543.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126214328979.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126214956006.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126223941045.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250127032832688.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250127121544577.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250127123837474.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250127124300009.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250127125601300.png">
<meta property="og:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250127130047597.png">
<meta property="article:published_time" content="2025-01-26T06:13:20.000Z">
<meta property="article:modified_time" content="2025-01-27T05:08:36.114Z">
<meta property="article:author" content="ğŸ’—">
<meta property="article:tag" content="ä»¥å¤ªåŠ">
<meta property="article:tag" content="solidity">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126150027700.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Solidityå…¥é—¨å­¦ä¹ (äºŒ)</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
		<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			  inlineMath: [['$','$']]
			}
		  });
		</script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
	
<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="X2n." type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/tags/">Tag</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2025/02/03/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%B8%89/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2025/01/22/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%B8%80/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&text=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&title=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&is_video=false&description=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Solidityå…¥é—¨å­¦ä¹ (äºŒ)&body=Check out this article: https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&title=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&title=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&title=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&title=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&name=Solidityå…¥é—¨å­¦ä¹ (äºŒ)&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&t=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E6%B5%81"><span class="toc-number">1.</span> <span class="toc-text">æ§åˆ¶æµ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E6%B5%81-2"><span class="toc-number">1.1.</span> <span class="toc-text">æ§åˆ¶æµ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%92%8C%E4%BF%AE%E9%A5%B0%E5%99%A8"><span class="toc-number">2.</span> <span class="toc-text">æ„é€ å‡½æ•°å’Œä¿®é¥°å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">2.1.</span> <span class="toc-text">æ„é€ å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E9%A5%B0%E5%99%A8"><span class="toc-number">2.2.</span> <span class="toc-text">ä¿®é¥°å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95"><span class="toc-number">2.3.</span> <span class="toc-text">è¿è¡Œæµ‹è¯•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">äº‹ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-2"><span class="toc-number">3.1.</span> <span class="toc-text">äº‹ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.2.</span> <span class="toc-text">å£°æ˜äº‹ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8A%E6%94%BE%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.3.</span> <span class="toc-text">é‡Šæ”¾äº‹ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EVM%E6%97%A5%E5%BF%97-Log"><span class="toc-number">3.4.</span> <span class="toc-text">EVMæ—¥å¿—(Log)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98-Topics"><span class="toc-number">3.5.</span> <span class="toc-text">ä¸»é¢˜(Topics)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE-Data"><span class="toc-number">3.6.</span> <span class="toc-text">æ•°æ®(Data)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">4.</span> <span class="toc-text">ç»§æ‰¿</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF-2"><span class="toc-number">4.1.</span> <span class="toc-text">ç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%84%E5%88%99"><span class="toc-number">4.2.</span> <span class="toc-text">è§„åˆ™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%BB%A7%E6%89%BF"><span class="toc-number">4.3.</span> <span class="toc-text">ç®€å•ç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF"><span class="toc-number">4.4.</span> <span class="toc-text">å¤šé‡ç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E9%A5%B0%E5%99%A8%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="toc-number">4.5.</span> <span class="toc-text">ä¿®é¥°å™¨çš„ç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="toc-number">4.6.</span> <span class="toc-text">æ„é€ å‡½æ•°çš„ç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E7%88%B6%E5%90%88%E7%BA%A6%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">4.7.</span> <span class="toc-text">è°ƒç”¨çˆ¶åˆçº¦çš„å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%92%BB%E7%9F%B3%E7%BB%A7%E6%89%BF"><span class="toc-number">4.8.</span> <span class="toc-text">é’»çŸ³ç»§æ‰¿</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E5%90%88%E7%BA%A6%E5%92%8C%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.</span> <span class="toc-text">æŠ½è±¡åˆçº¦å’Œæ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E5%90%88%E7%BA%A6"><span class="toc-number">5.1.</span> <span class="toc-text">æŠ½è±¡åˆçº¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.2.</span> <span class="toc-text">æ¥å£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IERC721%E4%BA%8B%E4%BB%B6"><span class="toc-number">5.3.</span> <span class="toc-text">IERC721äº‹ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IERC721%E5%87%BD%E6%95%B0"><span class="toc-number">5.4.</span> <span class="toc-text">IERC721å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3%EF%BC%9F"><span class="toc-number">5.5.</span> <span class="toc-text">ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ¥å£ï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8"><span class="toc-number">6.</span> <span class="toc-text">å¼‚å¸¸</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8-2"><span class="toc-number">6.1.</span> <span class="toc-text">å¼‚å¸¸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Error"><span class="toc-number">6.2.</span> <span class="toc-text">Error</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Require"><span class="toc-number">6.3.</span> <span class="toc-text">Require</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Assert"><span class="toc-number">6.4.</span> <span class="toc-text">Assert</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95%E7%9A%84gas%E6%AF%94%E8%BE%83"><span class="toc-number">6.5.</span> <span class="toc-text">ä¸‰ç§æ–¹æ³•çš„gasæ¯”è¾ƒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">7.</span> <span class="toc-text">å‚è€ƒ</span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Solidityå…¥é—¨å­¦ä¹ (äºŒ)
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">ğŸ’—</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2025-01-26T06:13:20.000Z" class="dt-published" itemprop="datePublished">2025-01-26</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/Web3/">Web3</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/solidity/" rel="tag">solidity</a>, <a class="p-category" href="/tags/%E4%BB%A5%E5%A4%AA%E5%9D%8A/" rel="tag">ä»¥å¤ªåŠ</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h2 id="æ§åˆ¶æµ">æ§åˆ¶æµ</h2>
<p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å°†ä»‹ç»<code>Solidity</code>ä¸­çš„æ§åˆ¶æµã€‚</p>
<p>æµ‹è¯•ä»£ç <code>Control.sol</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.21;</span><br><span class="line">contract Controlflow &#123;</span><br><span class="line">    // if else</span><br><span class="line">    function ifElseTest(uint256 _number) public pure returns(bool)&#123;</span><br><span class="line">        if(_number == 0)&#123;</span><br><span class="line">            return(true);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            return(false);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // for loop</span><br><span class="line">    function forLoopTest() public pure returns(uint256)&#123;</span><br><span class="line">        uint sum = 0;</span><br><span class="line">        for(uint i = 0; i &lt; 10; i++)&#123;</span><br><span class="line">            sum += i;</span><br><span class="line">        &#125;</span><br><span class="line">        return(sum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // while</span><br><span class="line">    function whileTest() public pure returns(uint256)&#123;</span><br><span class="line">        uint sum = 0;</span><br><span class="line">        uint i = 0;</span><br><span class="line">        while(i &lt; 10)&#123;</span><br><span class="line">            sum += i;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        return(sum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // do-while</span><br><span class="line">    function doWhileTest() public pure returns(uint256)&#123;</span><br><span class="line">        uint sum = 0;</span><br><span class="line">        uint i = 0;</span><br><span class="line">        do&#123;</span><br><span class="line">            sum += i;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;while(i &lt; 10);</span><br><span class="line">        return(sum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ä¸‰å…ƒè¿ç®—ç¬¦ ternary/conditional operator</span><br><span class="line">    function ternaryTest(uint256 x, uint256 y) public pure returns(uint256)&#123;</span><br><span class="line">        // return the max of x and y</span><br><span class="line">        return x &gt;= y ? x: y; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„âš ï¸</strong>ï¼š<code>Solidity</code>ä¸­æœ€å¸¸ç”¨çš„å˜é‡ç±»å‹æ˜¯<code>uint</code>ï¼Œä¹Ÿå°±æ˜¯æ­£æ•´æ•°ï¼Œå–åˆ°è´Ÿå€¼çš„è¯ï¼Œä¼šæŠ¥<code>underflow</code>é”™è¯¯ã€‚</p>
<h3 id="æ§åˆ¶æµ-2">æ§åˆ¶æµ</h3>
<p><code>Solidity</code>çš„æ§åˆ¶æµä¸å…¶ä»–è¯­è¨€ç±»ä¼¼ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ç§ï¼š</p>
<ol>
<li>if-else</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function ifElseTest(uint256 _number) public pure returns(bool)&#123;</span><br><span class="line">    if(_number == 0)&#123;</span><br><span class="line">        return(true);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return(false);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>forå¾ªç¯</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function forLoopTest() public pure returns(uint256)&#123;</span><br><span class="line">    uint sum = 0;</span><br><span class="line">    for(uint i = 0; i &lt; 10; i++)&#123;</span><br><span class="line">        sum += i;</span><br><span class="line">    &#125;</span><br><span class="line">    return(sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>whileå¾ªç¯</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function whileTest() public pure returns(uint256)&#123;</span><br><span class="line">    uint sum = 0;</span><br><span class="line">    uint i = 0;</span><br><span class="line">    while(i &lt; 10)&#123;</span><br><span class="line">        sum += i;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    return(sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>do-whileå¾ªç¯</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function doWhileTest() public pure returns(uint256)&#123;</span><br><span class="line">    uint sum = 0;</span><br><span class="line">    uint i = 0;</span><br><span class="line">    do&#123;</span><br><span class="line">        sum += i;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;while(i &lt; 10);</span><br><span class="line">    return(sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>ä¸‰ç›®è¿ç®—</li>
</ol>
<p>ä¸‰å…ƒè¿ç®—ç¬¦æ˜¯<code>Solidity</code>ä¸­å”¯ä¸€ä¸€ä¸ªæ¥å—ä¸‰ä¸ªæ“ä½œæ•°çš„è¿ç®—ç¬¦ï¼Œè§„åˆ™<code>æ¡ä»¶? æ¡ä»¶ä¸ºçœŸçš„è¡¨è¾¾å¼:æ¡ä»¶ä¸ºå‡çš„è¡¨è¾¾å¼</code>ã€‚æ­¤è¿ç®—ç¬¦ç»å¸¸ç”¨ä½œ<code>if</code>è¯­å¥çš„å¿«æ·æ–¹å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// ä¸‰å…ƒè¿ç®—ç¬¦ ternary/conditional operator</span><br><span class="line">function ternaryTest(uint256 x, uint256 y) public pure returns(uint256)&#123;</span><br><span class="line">    // return the max of x and y</span><br><span class="line">    return x &gt;= y ? x: y; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å¦å¤–è¿˜æœ‰<code>continue</code>ï¼ˆç«‹å³è¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯ï¼‰å’Œ<code>break</code>ï¼ˆè·³å‡ºå½“å‰å¾ªç¯ï¼‰å…³é”®å­—å¯ä»¥ä½¿ç”¨ã€‚</strong></p>
<h2 id="æ„é€ å‡½æ•°å’Œä¿®é¥°å™¨">æ„é€ å‡½æ•°å’Œä¿®é¥°å™¨</h2>
<p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å°†ç”¨åˆçº¦æƒé™æ§åˆ¶ï¼ˆ<code>Ownable</code>ï¼‰çš„ä¾‹å­ä»‹ç»<code>Solidity</code>è¯­è¨€ä¸­æ„é€ å‡½æ•°ï¼ˆ<code>constructor</code>ï¼‰å’Œç‹¬æœ‰çš„ä¿®é¥°å™¨ï¼ˆ<code>modifier</code>ï¼‰ã€‚æµ‹è¯•ä»£ç <code>Owner.sol</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.21;</span><br><span class="line"></span><br><span class="line">contract Owner &#123;</span><br><span class="line">    //å®šä¹‰ownerå˜é‡</span><br><span class="line">    address public owner;</span><br><span class="line">    </span><br><span class="line">    //æ„é€ å‡½æ•°</span><br><span class="line">    constructor(address initialOwner)&#123;</span><br><span class="line">        //åœ¨éƒ¨ç½²åˆçº¦æ—¶ï¼Œå°†ownerè®¾ç½®ä¸ºinitialOwner</span><br><span class="line">        owner = initialOwner;</span><br><span class="line">    &#125;</span><br><span class="line">    modifier onlyOwner&#123;</span><br><span class="line">        //æ£€æŸ¥åœ°å€æ˜¯å¦ä¸ºowner</span><br><span class="line">        require(msg.sender == owner);</span><br><span class="line">        //å¦‚æœæ˜¯çš„è¯ï¼Œç»§ç»­è¿è¡Œå‡½æ•°ä¸»ä½“ï¼Œå¦åˆ™æŠ¥é”™å¹¶revertäº¤æ˜“</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line">    //</span><br><span class="line">    function changeOwner(address _newOwner) external onlyOwner&#123;</span><br><span class="line">        //åªæœ‰ownerèƒ½è¿è¡Œè¿™ä¸ªå‡½æ•°</span><br><span class="line">        owner = _newOwner;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ„é€ å‡½æ•°">æ„é€ å‡½æ•°</h3>
<p>æ„é€ å‡½æ•°ï¼ˆ<code>constructor</code>ï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œæ¯ä¸ªåˆçº¦å¯ä»¥å®šä¹‰ä¸€ä¸ªï¼Œå¹¶åœ¨éƒ¨ç½²åˆçº¦çš„æ—¶å€™è‡ªåŠ¨è¿è¡Œä¸€æ¬¡ã€‚å®ƒå¯ä»¥ç”¨æ¥åˆå§‹åŒ–åˆçº¦çš„ä¸€äº›å‚æ•°ï¼Œä¾‹å¦‚åˆå§‹åŒ–åˆçº¦çš„<code>owner</code>åœ°å€ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">address owner; // å®šä¹‰ownerå˜é‡</span><br><span class="line">// æ„é€ å‡½æ•°</span><br><span class="line">constructor(address initialOwner) &#123;</span><br><span class="line">    owner = initialOwner; // åœ¨éƒ¨ç½²åˆçº¦çš„æ—¶å€™ï¼Œå°†ownerè®¾ç½®ä¸ºä¼ å…¥çš„initialOwneråœ°å€</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„</strong>ï¼šæ„é€ å‡½æ•°åœ¨ä¸åŒçš„Solidityç‰ˆæœ¬ä¸­çš„è¯­æ³•å¹¶ä¸ä¸€è‡´ï¼Œåœ¨<strong>Solidity 0.4.22ä¹‹å‰</strong>ï¼Œæ„é€ å‡½æ•°ä¸ä½¿ç”¨ <code>constructor</code> è€Œæ˜¯ä½¿ç”¨ä¸åˆçº¦ååŒåçš„å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°è€Œä½¿ç”¨ï¼Œç”±äºè¿™ç§æ—§å†™æ³•å®¹æ˜“ä½¿å¼€å‘è€…åœ¨ä¹¦å†™æ—¶å‘ç”Ÿç–æ¼ï¼ˆä¾‹å¦‚åˆçº¦åå« <code>Parents</code>ï¼Œæ„é€ å‡½æ•°åå†™æˆ <code>parents</code>ï¼‰ï¼Œä½¿å¾—æ„é€ å‡½æ•°å˜æˆæ™®é€šå‡½æ•°ï¼Œå¼•å‘æ¼æ´ï¼Œæ‰€ä»¥0.4.22ç‰ˆæœ¬åŠä¹‹åï¼Œé‡‡ç”¨äº†å…¨æ–°çš„ <code>constructor</code> å†™æ³•ã€‚</p>
<p>æ„é€ å‡½æ•°çš„æ—§å†™æ³•ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity =0.4.21;</span><br><span class="line">contract Parents &#123;</span><br><span class="line">    // ä¸åˆçº¦åParentsåŒåçš„å‡½æ•°å°±æ˜¯æ„é€ å‡½æ•°</span><br><span class="line">    function Parents () public &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®é¥°å™¨">ä¿®é¥°å™¨</h3>
<p>ä¿®é¥°å™¨ï¼ˆ<code>modifier</code>ï¼‰æ˜¯<code>Solidity</code>ç‰¹æœ‰çš„è¯­æ³•ï¼Œç±»ä¼¼äºé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„è£…é¥°å™¨ï¼ˆ<code>decorator</code>ï¼‰ï¼Œå£°æ˜å‡½æ•°æ‹¥æœ‰çš„ç‰¹æ€§ï¼Œå¹¶å‡å°‘ä»£ç å†—ä½™ã€‚å®ƒå°±åƒé’¢é“ä¾ çš„æ™ºèƒ½ç›”ç”²ï¼Œç©¿ä¸Šå®ƒçš„å‡½æ•°ä¼šå¸¦æœ‰æŸäº›ç‰¹å®šçš„è¡Œä¸ºã€‚<code>modifier</code>çš„ä¸»è¦ä½¿ç”¨åœºæ™¯æ˜¯è¿è¡Œå‡½æ•°å‰çš„æ£€æŸ¥ï¼Œä¾‹å¦‚åœ°å€ï¼Œå˜é‡ï¼Œä½™é¢ç­‰ã€‚</p>
<p>æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªå«åšonlyOwnerçš„modifierï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">modifier onlyOwner&#123;</span><br><span class="line">        //æ£€æŸ¥åœ°å€æ˜¯å¦ä¸ºowner</span><br><span class="line">        require(msg.sender == owner);</span><br><span class="line">        //å¦‚æœæ˜¯çš„è¯ï¼Œç»§ç»­è¿è¡Œå‡½æ•°ä¸»ä½“ï¼Œå¦åˆ™æŠ¥é”™å¹¶revertäº¤æ˜“</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>å¸¦æœ‰<code>onlyOwner</code>ä¿®é¥°ç¬¦çš„å‡½æ•°åªèƒ½è¢«<code>owner</code>åœ°å€è°ƒç”¨ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰ä¸€ä¸ªå¸¦æœ‰onlyOwnerä¿®é¥°ç¬¦çš„å‡½æ•°</span><br><span class="line">    function changeOwner(address _newOwner) external onlyOwner&#123;</span><br><span class="line">        //åªæœ‰ownerèƒ½è¿è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå¹¶æ”¹å˜owner</span><br><span class="line">        owner = _newOwner;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>changeOwner</code>å‡½æ•°ï¼Œè¿è¡Œå®ƒå¯ä»¥æ”¹å˜åˆçº¦çš„<code>owner</code>ï¼Œä½†æ˜¯ç”±äº<code>onlyOwner</code>ä¿®é¥°ç¬¦çš„å­˜åœ¨ï¼Œåªæœ‰åŸå…ˆçš„<code>owner</code>å¯ä»¥è°ƒç”¨ï¼Œåˆ«äººè°ƒç”¨å°±ä¼šæŠ¥é”™ã€‚è¿™ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ§åˆ¶æ™ºèƒ½åˆçº¦æƒé™çš„æ–¹æ³•ã€‚</p>
<h3 id="è¿è¡Œæµ‹è¯•">è¿è¡Œæµ‹è¯•</h3>
<p>é¦–å…ˆæ˜¯éƒ¨ç½²ä»£ç ï¼Œä¼ é€’ä¸€ä¸ªéœ€è¦åˆå§‹åŒ–çš„<code>owner</code>ï¼Œåˆå§‹åŒ–<code>owner</code>ä¸º<code>0x5B38Da6a701c568545dCfcB03FcB875f56beddC4</code></p>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126150027700.png" alt="image-20250126150027700"></p>
<p>ä½¿ç”¨å¦ä¸€ä¸ªç”¨æˆ·<code>0xAb8483F64d9C6d1EcF9b849Ae677dD3315835cb2</code>ï¼Œå»è°ƒç”¨åˆçº¦ï¼Œå¹¶å°è¯•ä¿®æ”¹<code>owner</code>ã€‚<code>owner</code>ä¿®æ”¹å¤±è´¥ï¼</p>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126150311002.png" alt="image-20250126150311002"></p>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126150255810.png" alt="image-20250126150255810"></p>
<p>å°è¯•ä½¿ç”¨éƒ¨ç½²æ—¶è¾“å…¥çš„è´¦æˆ·``0x5B38Da6a701c568545dCfcB03FcB875f56beddC4`ã€‚</p>
<p>å»æ”¹å˜<code>owner</code>ä¸º<code>0xAb8483F64d9C6d1EcF9b849Ae677dD3315835cb2</code>ï¼Œ<code>owner</code>ä¿®æ”¹æˆåŠŸï¼</p>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126150540552.png" alt="image-20250126150540552"></p>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126150740601.png" alt="image-20250126150740601"></p>
<h2 id="äº‹ä»¶">äº‹ä»¶</h2>
<p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬ç”¨è½¬è´¦ERC20ä»£å¸ä¸ºä¾‹æ¥ä»‹ç»<code>Solidity</code>ä¸­çš„äº‹ä»¶ï¼ˆ<code>event</code>ï¼‰ã€‚</p>
<p>æµ‹è¯•ä»£ç <code>Events.sol</code>,ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.4;</span><br><span class="line">contract Events&#123;</span><br><span class="line">    //å®šä¹‰_balancesæ˜ å°„å˜é‡ï¼Œè®°å½•æ¯ä¸ªåœ°å€çš„æ¯”ç‰¹å¸æ•°é‡</span><br><span class="line">    mapping(address =&gt; uint256) public _balances;</span><br><span class="line"></span><br><span class="line">    //å®šä¹‰Transfer eventï¼Œè®°å½•transferäº¤æ˜“çš„è½¬è´¦åœ°å€ï¼Œæ¥æ”¶åœ°å€å’Œè½¬è´¦æ•°é‡ã€‚</span><br><span class="line">    event Transfer(address indexed from,address indexed to,uint256 value);</span><br><span class="line"></span><br><span class="line">    //å®šä¹‰_transferå‡½æ•°ï¼Œæ‰§è¡Œè½¬è´¦é€»è¾‘</span><br><span class="line">    function _transfer(</span><br><span class="line">        address from,</span><br><span class="line">        address to,</span><br><span class="line">        uint256 amount</span><br><span class="line">    ) external &#123;</span><br><span class="line">        //ç»™è½¬è´¦åœ°å€ä¸€äº›åˆå§‹ä»£å¸</span><br><span class="line">        _balances[from] = 10000000;</span><br><span class="line"></span><br><span class="line">        //fromåœ°å€å‡å»è½¬è´¦æ•°é‡</span><br><span class="line">        _balances[from] -= amount;</span><br><span class="line">        //toåœ°å€åŠ ä¸Šè½¬è´¦æ•°é‡</span><br><span class="line">        _balances[to] += amount;</span><br><span class="line"></span><br><span class="line">        //é‡Šæ”¾äº‹ä»¶</span><br><span class="line">        emit Transfer(from, to, amount);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äº‹ä»¶-2">äº‹ä»¶</h3>
<p><code>Solidity</code>ä¸­çš„äº‹ä»¶ï¼ˆ<code>event</code>ï¼‰æ˜¯<code>EVM</code>ä¸Šæ—¥å¿—çš„æŠ½è±¡ï¼Œå®ƒå…·æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>å“åº”ï¼šåº”ç”¨ç¨‹åºï¼ˆ<a target="_blank" rel="noopener" href="https://learnblockchain.cn/docs/ethers.js/api-contract.html#id18"><code>ethers.js</code></a>ï¼‰å¯ä»¥é€šè¿‡<code>RPC</code>æ¥å£è®¢é˜…å’Œç›‘å¬è¿™äº›äº‹ä»¶ï¼Œå¹¶åœ¨å‰ç«¯åšå“åº”ã€‚</li>
<li>ç»æµï¼šäº‹ä»¶æ˜¯<code>EVM</code>ä¸Šæ¯”è¾ƒç»æµçš„å­˜å‚¨æ•°æ®çš„æ–¹å¼ï¼Œæ¯ä¸ªå¤§æ¦‚æ¶ˆè€—2,000 <code>gas</code>ï¼›ç›¸æ¯”ä¹‹ä¸‹ï¼Œé“¾ä¸Šå­˜å‚¨ä¸€ä¸ªæ–°å˜é‡è‡³å°‘éœ€è¦20,000 <code>gas</code>ã€‚</li>
</ul>
<h3 id="å£°æ˜äº‹ä»¶">å£°æ˜äº‹ä»¶</h3>
<p>äº‹ä»¶çš„å£°æ˜ç”±<code>event</code>å…³é”®å­—å¼€å¤´ï¼Œæ¥ç€æ˜¯äº‹ä»¶åç§°ï¼Œæ‹¬å·é‡Œé¢å†™å¥½äº‹ä»¶éœ€è¦è®°å½•çš„å˜é‡ç±»å‹å’Œå˜é‡åã€‚</p>
<p>ä»¥<code>ERC20</code>ä»£å¸åˆçº¦çš„<code>Transfer</code>äº‹ä»¶ä¸ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">event Transfer(address indexed from, address indexed to, uint256 value);</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>Transfer</code>äº‹ä»¶å…±è®°å½•äº†3ä¸ªå˜é‡<code>from</code>ï¼Œ<code>to</code>å’Œ<code>value</code>ï¼Œåˆ†åˆ«å¯¹åº”ä»£å¸çš„è½¬è´¦åœ°å€ï¼Œæ¥æ”¶åœ°å€å’Œè½¬è´¦æ•°é‡ï¼Œå…¶ä¸­<code>from</code>å’Œ<code>to</code>å‰é¢å¸¦æœ‰<code>indexed</code>å…³é”®å­—ï¼Œä»–ä»¬ä¼šä¿å­˜åœ¨ä»¥å¤ªåŠè™šæ‹Ÿæœºæ—¥å¿—çš„<code>topics</code>ä¸­ï¼Œæ–¹ä¾¿ä¹‹åæ£€ç´¢ã€‚</p>
<h3 id="é‡Šæ”¾äº‹ä»¶">é‡Šæ”¾äº‹ä»¶</h3>
<p>æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°é‡Œé‡Šæ”¾äº‹ä»¶ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæ¯æ¬¡ç”¨<code>_transfer()</code>å‡½æ•°è¿›è¡Œè½¬è´¦æ“ä½œçš„æ—¶å€™ï¼Œéƒ½ä¼šé‡Šæ”¾<code>Transfer</code>äº‹ä»¶ï¼Œå¹¶è®°å½•ç›¸åº”çš„å˜é‡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// å®šä¹‰_transferå‡½æ•°ï¼Œæ‰§è¡Œè½¬è´¦é€»è¾‘</span><br><span class="line">function _transfer(</span><br><span class="line">    address from,</span><br><span class="line">    address to,</span><br><span class="line">    uint256 amount</span><br><span class="line">) external &#123;</span><br><span class="line"></span><br><span class="line">    _balances[from] = 10000000; // ç»™è½¬è´¦åœ°å€ä¸€äº›åˆå§‹ä»£å¸</span><br><span class="line"></span><br><span class="line">    _balances[from] -=  amount; // fromåœ°å€å‡å»è½¬è´¦æ•°é‡</span><br><span class="line">    _balances[to] += amount; // toåœ°å€åŠ ä¸Šè½¬è´¦æ•°é‡</span><br><span class="line"></span><br><span class="line">    // é‡Šæ”¾äº‹ä»¶</span><br><span class="line">    emit Transfer(from, to, amount);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="EVMæ—¥å¿—-Log">EVMæ—¥å¿—(Log)</h3>
<p>ä»¥å¤ªåŠè™šæ‹Ÿæœºï¼ˆEVMï¼‰ç”¨æ—¥å¿—<code>Log</code>æ¥å­˜å‚¨<code>Solidity</code>äº‹ä»¶ï¼Œæ¯æ¡æ—¥å¿—è®°å½•éƒ½åŒ…å«ä¸»é¢˜<code>topics</code>å’Œæ•°æ®<code>data</code>ä¸¤éƒ¨åˆ†ã€‚</p>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126183129690.png" alt="image-20250126183129690"></p>
<h3 id="ä¸»é¢˜-Topics">ä¸»é¢˜(Topics)</h3>
<p>æ—¥å¿—çš„ç¬¬ä¸€éƒ¨åˆ†æ˜¯ä¸»é¢˜æ•°ç»„ï¼Œç”¨äºæè¿°äº‹ä»¶ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡<code>4</code>ã€‚å®ƒçš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯äº‹ä»¶çš„ç­¾åï¼ˆå“ˆå¸Œï¼‰ã€‚</p>
<p>å¯¹äºä¸Šé¢çš„<code>Transfer</code>äº‹ä»¶ï¼Œå®ƒçš„äº‹ä»¶å“ˆå¸Œå°±æ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">keccak256(&quot;Transfer(address,address,uint256)&quot;)</span><br><span class="line"></span><br><span class="line">//0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef</span><br></pre></td></tr></table></figure>
<p>é™¤äº†äº‹ä»¶å“ˆå¸Œï¼Œä¸»é¢˜è¿˜å¯ä»¥åŒ…å«è‡³å¤š<code>3</code>ä¸ª<code>indexed</code>å‚æ•°ï¼Œä¹Ÿå°±æ˜¯<code>Transfer</code>äº‹ä»¶ä¸­çš„<code>from</code>å’Œ<code>to</code>ã€‚</p>
<p><code>indexed</code>æ ‡è®°çš„å‚æ•°å¯ä»¥ç†è§£ä¸ºæ£€ç´¢äº‹ä»¶çš„ç´¢å¼•â€œé”®â€ï¼Œæ–¹ä¾¿ä¹‹åæœç´¢ã€‚æ¯ä¸ª <code>indexed</code> å‚æ•°çš„å¤§å°ä¸ºå›ºå®šçš„256æ¯”ç‰¹ï¼Œå¦‚æœå‚æ•°å¤ªå¤§äº†ï¼ˆæ¯”å¦‚å­—ç¬¦ä¸²ï¼‰ï¼Œå°±ä¼šè‡ªåŠ¨è®¡ç®—å“ˆå¸Œå­˜å‚¨åœ¨ä¸»é¢˜ä¸­ã€‚</p>
<p>è¿™é‡Œå…¶å®ä¼šå¼•å…¥ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œæ ¹æ®Solidityçš„<a target="_blank" rel="noopener" href="https://docs.soliditylang.org/en/v0.8.27/abi-spec.html#encoding-of-indexed-event-parameters">å®˜æ–¹æ–‡æ¡£</a>, å¯¹äºéå€¼ç±»å‹çš„å‚æ•°ï¼ˆå¦‚arrays, bytes, stringsï¼‰, Solidityä¸ä¼šç›´æ¥å­˜å‚¨ï¼Œè€Œæ˜¯ä¼šå°†<code>Keccak-256</code>å“ˆå¸Œå­˜å‚¨åœ¨ä¸»é¢˜ä¸­ï¼Œä»è€Œå¯¼è‡´æ•°æ®ä¿¡æ¯çš„ä¸¢å¤±ã€‚è¿™å¯¹äºæŸäº›ä¾èµ–äºé“¾ä¸Šäº‹ä»¶çš„DAPPï¼ˆè·¨é“¾ï¼Œç”¨æˆ·æ³¨å†Œç­‰ç­‰ï¼‰æ¥è¯´ï¼Œå¯èƒ½ä¼šå¯¼è‡´äº‹ä»¶æ£€ç´¢å›°éš¾ï¼Œéœ€è¦è§£æå“ˆå¸Œå€¼ã€‚</p>
<h3 id="æ•°æ®-Data">æ•°æ®(Data)</h3>
<p>äº‹ä»¶ä¸­ä¸å¸¦ <code>indexed</code>çš„å‚æ•°ä¼šè¢«å­˜å‚¨åœ¨ <code>data</code> éƒ¨åˆ†ä¸­ï¼Œå¯ä»¥ç†è§£ä¸ºäº‹ä»¶çš„&quot;å€¼&quot;ã€‚<code>data</code> éƒ¨åˆ†çš„å˜é‡ä¸èƒ½è¢«ç›´æ¥æ£€ç´¢ï¼Œä½†å¯ä»¥å­˜å‚¨ä»»æ„å¤§å°çš„æ•°æ®ã€‚å› æ­¤ä¸€èˆ¬ <code>data</code> éƒ¨åˆ†å¯ä»¥ç”¨æ¥å­˜å‚¨å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚æ•°ç»„å’Œå­—ç¬¦ä¸²ç­‰ç­‰ï¼Œå› ä¸ºè¿™äº›æ•°æ®è¶…è¿‡äº†256æ¯”ç‰¹ï¼Œå³ä½¿å­˜å‚¨åœ¨äº‹ä»¶çš„ <code>topics</code> éƒ¨åˆ†ä¸­ï¼Œä¹Ÿæ˜¯ä»¥å“ˆå¸Œçš„æ–¹å¼å­˜å‚¨ã€‚å¦å¤–ï¼Œ<code>data</code> éƒ¨åˆ†çš„å˜é‡åœ¨å­˜å‚¨ä¸Šæ¶ˆè€—çš„gasç›¸æ¯”äº <code>topics</code> æ›´å°‘ã€‚</p>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126185114449.png" alt="image-20250126185114449"></p>
<p><code>Topics</code>é‡Œé¢æœ‰ä¸‰ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¿™ä¸ªäº‹ä»¶çš„å“ˆå¸Œï¼Œç¬¬äºŒå’Œä¸‰æ˜¯æˆ‘ä»¬å®šä¹‰çš„ä¸¤ä¸ª<code>indexed</code>å˜é‡çš„ä¿¡æ¯ï¼Œå³è½¬è´¦çš„è½¬å‡ºåœ°å€å’Œæ¥æ”¶åœ°å€ã€‚<code>Data</code>é‡Œé¢æ˜¯å‰©ä¸‹çš„ä¸å¸¦<code>indexed</code>çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯è½¬è´¦æ•°é‡ã€‚å¯ä»¥åœ¨ä¸Šå›¾çœ‹åˆ°<code>Data</code>éƒ¨åˆ†ä¸º<code>0x32</code>ï¼Œ50çš„16è¿›åˆ¶ã€‚</p>
<h2 id="ç»§æ‰¿">ç»§æ‰¿</h2>
<p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬ä»‹ç»<code>Solidity</code>ä¸­çš„ç»§æ‰¿ï¼ˆ<code>inheritance</code>ï¼‰ï¼ŒåŒ…æ‹¬ç®€å•ç»§æ‰¿ï¼Œå¤šé‡ç»§æ‰¿ï¼Œä»¥åŠä¿®é¥°å™¨ï¼ˆ<code>Modifier</code>ï¼‰å’Œæ„é€ å‡½æ•°ï¼ˆ<code>Constructor</code>ï¼‰çš„ç»§æ‰¿ã€‚</p>
<h3 id="ç»§æ‰¿-2">ç»§æ‰¿</h3>
<p>ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹å¾ˆé‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œå¯ä»¥æ˜¾è‘—å‡å°‘é‡å¤ä»£ç ã€‚å¦‚æœæŠŠåˆçº¦çœ‹ä½œæ˜¯å¯¹è±¡çš„è¯ï¼Œ<code>Solidity</code>ä¹Ÿæ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ï¼Œä¹Ÿæ”¯æŒç»§æ‰¿ã€‚</p>
<h3 id="è§„åˆ™">è§„åˆ™</h3>
<ul>
<li><code>virtual</code>: çˆ¶åˆçº¦ä¸­çš„å‡½æ•°ï¼Œå¦‚æœ<strong>å¸Œæœ›å­åˆçº¦é‡å†™ï¼Œéœ€è¦åŠ ä¸Š<code>virtual</code>å…³é”®å­—ã€‚</strong></li>
<li><code>override</code>ï¼š<strong>å­åˆçº¦é‡å†™äº†çˆ¶åˆçº¦ä¸­çš„å‡½æ•°ï¼Œéœ€è¦åŠ ä¸Š<code>override</code>å…³é”®å­—</strong>ã€‚</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼šç”¨<code>override</code>ä¿®é¥°<code>public</code>å˜é‡ï¼Œä¼šé‡å†™ä¸å˜é‡åŒåçš„<code>getter</code>å‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mapping(address =&gt; uint256) public override balanceOf;</span><br></pre></td></tr></table></figure>
<h3 id="ç®€å•ç»§æ‰¿">ç®€å•ç»§æ‰¿</h3>
<p>æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªç®€å•çš„çˆ·çˆ·åˆçº¦<code>Yeye</code>ï¼Œé‡Œé¢åŒ…å«1ä¸ª<code>Log</code>äº‹ä»¶å’Œ3ä¸ª<code>function</code>: <code>hip()</code>, <code>pop()</code>, <code>yeye()</code>ï¼Œè¾“å‡ºéƒ½æ˜¯â€Yeyeâ€ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">contract Yeye &#123;</span><br><span class="line">    event Log(string msg);</span><br><span class="line"></span><br><span class="line">    // å®šä¹‰3ä¸ªfunction: hip(), pop(), yeye()ï¼ŒLogå€¼ä¸ºYeyeã€‚</span><br><span class="line">    function hip() public virtual&#123;</span><br><span class="line">        emit Log(&quot;Yeye&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function pop() public virtual&#123;</span><br><span class="line">        emit Log(&quot;Yeye&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function yeye() public virtual &#123;</span><br><span class="line">        emit Log(&quot;Yeye&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ªçˆ¸çˆ¸åˆçº¦<code>Baba</code>ï¼Œè®©ä»–ç»§æ‰¿<code>Yeye</code>åˆçº¦ï¼Œè¯­æ³•å°±æ˜¯<code>contract Baba is Yeye</code>ï¼Œéå¸¸ç›´è§‚ã€‚åœ¨<code>Baba</code>åˆçº¦é‡Œï¼Œæˆ‘ä»¬é‡å†™ä¸€ä¸‹<code>hip()</code>å’Œ<code>pop()</code>è¿™ä¸¤ä¸ªå‡½æ•°ï¼ŒåŠ ä¸Š<code>override</code>å…³é”®å­—ï¼Œå¹¶å°†ä»–ä»¬çš„è¾“å‡ºæ”¹ä¸º<code>â€Babaâ€</code>ï¼›å¹¶ä¸”åŠ ä¸€ä¸ªæ–°çš„å‡½æ•°<code>baba</code>ï¼Œè¾“å‡ºä¹Ÿæ˜¯<code>â€Babaâ€</code>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">contract Baba is Yeye&#123;</span><br><span class="line">    // ç»§æ‰¿ä¸¤ä¸ªfunction: hip()å’Œpop()ï¼Œè¾“å‡ºæ”¹ä¸ºBabaã€‚</span><br><span class="line">    function hip() public virtual override&#123;</span><br><span class="line">        emit Log(&quot;Baba&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function pop() public virtual override&#123;</span><br><span class="line">        emit Log(&quot;Baba&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function baba() public virtual&#123;</span><br><span class="line">        emit Log(&quot;Baba&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®Œæ•´çš„æµ‹è¯•ä»£ç <code>Yeye.sol</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.21;</span><br><span class="line">contract Yeye&#123;</span><br><span class="line">    event Log(string msg);</span><br><span class="line">    // å®šä¹‰3ä¸ªfunction: hip(), pop(), yeye()ï¼ŒLogå€¼ä¸ºYeyeã€‚</span><br><span class="line">    function hip() public virtual&#123;</span><br><span class="line">        emit Log(&quot;Yeye&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function pop() public virtual&#123;</span><br><span class="line">        emit Log(&quot;Yeye&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function yeye() public virtual &#123;</span><br><span class="line">        emit Log(&quot;Yeye&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract Baba is Yeye&#123;</span><br><span class="line">    // ç»§æ‰¿ä¸¤ä¸ªfunction: hip()å’Œpop()ï¼Œè¾“å‡ºæ”¹ä¸ºBabaã€‚</span><br><span class="line">    function hip() public virtual override&#123;</span><br><span class="line">        emit Log(&quot;Baba&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function pop() public virtual override&#123;</span><br><span class="line">        emit Log(&quot;Baba&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function baba() public virtual&#123;</span><br><span class="line">        emit Log(&quot;Baba&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126213523593.png" alt="image-20250126213523593"></p>
<h3 id="å¤šé‡ç»§æ‰¿">å¤šé‡ç»§æ‰¿</h3>
<p><code>Solidity</code>çš„åˆçº¦å¯ä»¥ç»§æ‰¿å¤šä¸ªåˆçº¦ã€‚è§„åˆ™ï¼š</p>
<ol>
<li>ç»§æ‰¿æ—¶è¦æŒ‰è¾ˆåˆ†æœ€é«˜åˆ°æœ€ä½çš„é¡ºåºæ’ã€‚æ¯”å¦‚æˆ‘ä»¬å†™ä¸€ä¸ª<code>Erzi</code>åˆçº¦ï¼Œç»§æ‰¿<code>Yeye</code>åˆçº¦å’Œ<code>Baba</code>åˆçº¦ï¼Œé‚£ä¹ˆå°±è¦å†™æˆ<code>contract Erzi is Yeye, Baba</code>ï¼Œè€Œä¸èƒ½å†™æˆ<code>contract Erzi is Baba, Yeye</code>ï¼Œä¸ç„¶å°±ä¼šæŠ¥é”™ã€‚</li>
<li>å¦‚æœæŸä¸€ä¸ªå‡½æ•°åœ¨å¤šä¸ªç»§æ‰¿çš„åˆçº¦é‡Œéƒ½å­˜åœ¨ï¼Œæ¯”å¦‚ä¾‹å­ä¸­çš„<code>hip()</code>å’Œ<code>pop()</code>ï¼Œåœ¨å­åˆçº¦é‡Œå¿…é¡»é‡å†™ï¼Œä¸ç„¶ä¼šæŠ¥é”™ã€‚</li>
<li>é‡å†™åœ¨å¤šä¸ªçˆ¶åˆçº¦ä¸­éƒ½é‡åçš„å‡½æ•°æ—¶ï¼Œ<code>override</code>å…³é”®å­—åé¢è¦åŠ ä¸Šæ‰€æœ‰çˆ¶åˆçº¦åå­—ï¼Œä¾‹å¦‚<code>override(Yeye, Baba)</code>ã€‚</li>
</ol>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">contract Erzi is Yeye, Baba&#123;</span><br><span class="line">    // ç»§æ‰¿ä¸¤ä¸ªfunction: hip()å’Œpop()ï¼Œè¾“å‡ºå€¼ä¸ºErziã€‚</span><br><span class="line">    function hip() public virtual override(Yeye, Baba)&#123;</span><br><span class="line">        emit Log(&quot;Erzi&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function pop() public virtual override(Yeye, Baba) &#123;</span><br><span class="line">        emit Log(&quot;Erzi&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>Erzi</code>åˆçº¦é‡Œé¢é‡å†™äº†<code>hip()</code>å’Œ<code>pop()</code>ä¸¤ä¸ªå‡½æ•°ï¼Œå°†è¾“å‡ºæ”¹ä¸º<code>â€Erziâ€</code>ï¼Œå¹¶ä¸”è¿˜åˆ†åˆ«ä»<code>Yeye</code>å’Œ<code>Baba</code>åˆçº¦ç»§æ‰¿äº†<code>yeye()</code>å’Œ<code>baba()</code>ä¸¤ä¸ªå‡½æ•°ã€‚</p>
<p>å®Œæ•´çš„æµ‹è¯•ä»£ç <code>Yeye.sol</code>ï¼Œå®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.21;</span><br><span class="line">contract Yeye&#123;</span><br><span class="line">    event Log(string msg);</span><br><span class="line">    // å®šä¹‰3ä¸ªfunction: hip(), pop(), yeye()ï¼ŒLogå€¼ä¸ºYeyeã€‚</span><br><span class="line">    function hip() public virtual&#123;</span><br><span class="line">        emit Log(&quot;Yeye&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function pop() public virtual&#123;</span><br><span class="line">        emit Log(&quot;Yeye&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function yeye() public virtual &#123;</span><br><span class="line">        emit Log(&quot;Yeye&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract Baba is Yeye&#123;</span><br><span class="line">    // ç»§æ‰¿ä¸¤ä¸ªfunction: hip()å’Œpop()ï¼Œè¾“å‡ºæ”¹ä¸ºBabaã€‚</span><br><span class="line">    function hip() public virtual override&#123;</span><br><span class="line">        emit Log(&quot;Baba&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function pop() public virtual override&#123;</span><br><span class="line">        emit Log(&quot;Baba&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function baba() public virtual&#123;</span><br><span class="line">        emit Log(&quot;Baba&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract Erzi is Yeye, Baba&#123;</span><br><span class="line">    // ç»§æ‰¿ä¸¤ä¸ªfunction: hip()å’Œpop()ï¼Œè¾“å‡ºå€¼ä¸ºErziã€‚</span><br><span class="line">    function hip() public virtual override(Yeye, Baba)&#123;</span><br><span class="line">        emit Log(&quot;Erzi&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function pop() public virtual override(Yeye, Baba) &#123;</span><br><span class="line">        emit Log(&quot;Erzi&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126213416543.png" alt="image-20250126213416543"></p>
<h3 id="ä¿®é¥°å™¨çš„ç»§æ‰¿">ä¿®é¥°å™¨çš„ç»§æ‰¿</h3>
<p><code>Solidity</code>ä¸­çš„ä¿®é¥°å™¨ï¼ˆ<code>Modifier</code>ï¼‰åŒæ ·å¯ä»¥ç»§æ‰¿ï¼Œç”¨æ³•ä¸å‡½æ•°ç»§æ‰¿ç±»ä¼¼ï¼Œåœ¨ç›¸åº”çš„åœ°æ–¹åŠ <code>virtual</code>å’Œ<code>override</code>å…³é”®å­—å³å¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">contract Base1 &#123;</span><br><span class="line">    modifier exactDividedBy2And3(uint _a) virtual &#123;</span><br><span class="line">        require(_a % 2 == 0 &amp;&amp; _a % 3 == 0);</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract Identifier is Base1 &#123;</span><br><span class="line"></span><br><span class="line">    //è®¡ç®—ä¸€ä¸ªæ•°åˆ†åˆ«è¢«2é™¤å’Œè¢«3é™¤çš„å€¼ï¼Œä½†æ˜¯ä¼ å…¥çš„å‚æ•°å¿…é¡»æ˜¯2å’Œ3çš„å€æ•°</span><br><span class="line">    function getExactDividedBy2And3(uint _dividend) public exactDividedBy2And3(_dividend) pure returns(uint, uint) &#123;</span><br><span class="line">        return getExactDividedBy2And3WithoutModifier(_dividend);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //è®¡ç®—ä¸€ä¸ªæ•°åˆ†åˆ«è¢«2é™¤å’Œè¢«3é™¤çš„å€¼</span><br><span class="line">    function getExactDividedBy2And3WithoutModifier(uint _dividend) public pure returns(uint, uint)&#123;</span><br><span class="line">        uint div2 = _dividend / 2;</span><br><span class="line">        uint div3 = _dividend / 3;</span><br><span class="line">        return (div2, div3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Identifier</code>åˆçº¦å¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­ä½¿ç”¨çˆ¶åˆçº¦ä¸­çš„<code>exactDividedBy2And3</code>ä¿®é¥°å™¨ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨<code>override</code>å…³é”®å­—é‡å†™ä¿®é¥°å™¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">modifier exactDividedBy2And3(uint _a) override &#123;</span><br><span class="line">    _;</span><br><span class="line">    require(_a % 2 == 0 &amp;&amp; _a % 3 == 0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126214328979.png" alt="image-20250126214328979"></p>
<p>å®Œæ•´çš„æµ‹è¯•ä»£ç <code>Base1.sol</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.4;</span><br><span class="line">contract Base1 &#123;</span><br><span class="line">    modifier exactDividedBy2And3(uint _a) virtual &#123;</span><br><span class="line">        require(_a % 2 == 0 &amp;&amp; _a % 3 == 0);</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract Identifier is Base1 &#123;</span><br><span class="line"></span><br><span class="line">    //è®¡ç®—ä¸€ä¸ªæ•°åˆ†åˆ«è¢«2é™¤å’Œè¢«3é™¤çš„å€¼ï¼Œä½†æ˜¯ä¼ å…¥çš„å‚æ•°å¿…é¡»æ˜¯2å’Œ3çš„å€æ•°</span><br><span class="line">    function getExactDividedBy2And3(uint _dividend) public exactDividedBy2And3(_dividend) pure returns(uint, uint) &#123;</span><br><span class="line">        return getExactDividedBy2And3WithoutModifier(_dividend);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //è®¡ç®—ä¸€ä¸ªæ•°åˆ†åˆ«è¢«2é™¤å’Œè¢«3é™¤çš„å€¼</span><br><span class="line">    function getExactDividedBy2And3WithoutModifier(uint _dividend) public pure returns(uint, uint)&#123;</span><br><span class="line">        uint div2 = _dividend / 2;</span><br><span class="line">        uint div3 = _dividend / 3;</span><br><span class="line">        return (div2, div3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ„é€ å‡½æ•°çš„ç»§æ‰¿">æ„é€ å‡½æ•°çš„ç»§æ‰¿</h3>
<p>å­åˆçº¦æœ‰ä¸¤ç§æ–¹æ³•ç»§æ‰¿çˆ¶åˆçº¦çš„æ„é€ å‡½æ•°ã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œçˆ¶åˆçº¦<code>A</code>é‡Œé¢æœ‰ä¸€ä¸ªçŠ¶æ€å˜é‡<code>a</code>ï¼Œå¹¶ç”±æ„é€ å‡½æ•°çš„å‚æ•°æ¥ç¡®å®šï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// æ„é€ å‡½æ•°çš„ç»§æ‰¿</span><br><span class="line">abstract contract A &#123;</span><br><span class="line">    uint public a;</span><br><span class="line"></span><br><span class="line">    constructor(uint _a) &#123;</span><br><span class="line">        a = _a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>åœ¨ç»§æ‰¿æ—¶å£°æ˜çˆ¶æ„é€ å‡½æ•°çš„å‚æ•°ï¼Œä¾‹å¦‚ï¼š<code>contract B is A(6)</code></li>
<li>åœ¨å­åˆçº¦çš„æ„é€ å‡½æ•°ä¸­å£°æ˜æ„é€ å‡½æ•°çš„å‚æ•°ï¼Œä¾‹å¦‚ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">contract C is A &#123;</span><br><span class="line">    constructor(uint _c) A(_c * _c) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®Œæ•´çš„æµ‹è¯•ä»£ç <code>A.sol</code>å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.4;</span><br><span class="line">contract A&#123;</span><br><span class="line">    uint public a;</span><br><span class="line">    constructor(uint _a) &#123;</span><br><span class="line">        a = _a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">contract C is A &#123;</span><br><span class="line">    constructor(uint _c) A(_c * _c) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126214956006.png" alt="image-20250126214956006"></p>
<h3 id="è°ƒç”¨çˆ¶åˆçº¦çš„å‡½æ•°">è°ƒç”¨çˆ¶åˆçº¦çš„å‡½æ•°</h3>
<p>å­åˆçº¦æœ‰ä¸¤ç§æ–¹å¼è°ƒç”¨çˆ¶åˆçº¦çš„å‡½æ•°ï¼Œç›´æ¥è°ƒç”¨å’Œåˆ©ç”¨<code>super</code>å…³é”®å­—ã€‚</p>
<ol>
<li>ç›´æ¥è°ƒç”¨ï¼šå­åˆçº¦å¯ä»¥ç›´æ¥ç”¨<code>çˆ¶åˆçº¦å.å‡½æ•°å()</code>çš„æ–¹å¼æ¥è°ƒç”¨çˆ¶åˆçº¦å‡½æ•°ï¼Œä¾‹å¦‚<code>Yeye.pop()</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function callParent() public&#123;</span><br><span class="line">    Yeye.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><code>super</code>å…³é”®å­—ï¼šå­åˆçº¦å¯ä»¥åˆ©ç”¨<code>super.å‡½æ•°å()</code>æ¥è°ƒç”¨æœ€è¿‘çš„çˆ¶åˆçº¦å‡½æ•°ã€‚<code>Solidity</code>ç»§æ‰¿å…³ç³»æŒ‰å£°æ˜æ—¶ä»å³åˆ°å·¦çš„é¡ºåºæ˜¯ï¼š<code>contract Erzi is Yeye, Baba</code>ï¼Œé‚£ä¹ˆ<code>Baba</code>æ˜¯æœ€è¿‘çš„çˆ¶åˆçº¦ï¼Œ<code>super.pop()</code>å°†è°ƒç”¨<code>Baba.pop()</code>è€Œä¸æ˜¯<code>Yeye.pop()</code>ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function callParentSuper() public&#123;</span><br><span class="line">    // å°†è°ƒç”¨æœ€è¿‘çš„çˆ¶åˆçº¦å‡½æ•°ï¼ŒBaba.pop()</span><br><span class="line">    super.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é’»çŸ³ç»§æ‰¿">é’»çŸ³ç»§æ‰¿</h3>
<p>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œé’»çŸ³ç»§æ‰¿ï¼ˆè±å½¢ç»§æ‰¿ï¼‰æŒ‡ä¸€ä¸ªæ´¾ç”Ÿç±»åŒæ—¶æœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„åŸºç±»ã€‚</p>
<p>åœ¨å¤šé‡+è±å½¢ç»§æ‰¿é“¾æ¡ä¸Šä½¿ç”¨<code>super</code>å…³é”®å­—æ—¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ä½¿ç”¨<code>super</code>ä¼šè°ƒç”¨ç»§æ‰¿é“¾æ¡ä¸Šçš„æ¯ä¸€ä¸ªåˆçº¦çš„ç›¸å…³å‡½æ•°ï¼Œè€Œä¸æ˜¯åªè°ƒç”¨æœ€è¿‘çš„çˆ¶åˆçº¦ã€‚</p>
<p>æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªåˆçº¦<code>God</code>ï¼Œå†å†™<code>Adam</code>å’Œ<code>Eve</code>ä¸¤ä¸ªåˆçº¦ç»§æ‰¿<code>God</code>åˆçº¦ï¼Œæœ€åè®©åˆ›å»ºåˆçº¦<code>people</code>ç»§æ‰¿è‡ª<code>Adam</code>å’Œ<code>Eve</code>ï¼Œæ¯ä¸ªåˆçº¦éƒ½æœ‰<code>foo</code>å’Œ<code>bar</code>ä¸¤ä¸ªå‡½æ•°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.13;</span><br><span class="line"></span><br><span class="line">/* ç»§æ‰¿æ ‘ï¼š</span><br><span class="line">  God</span><br><span class="line"> /  \</span><br><span class="line">Adam Eve</span><br><span class="line"> \  /</span><br><span class="line">people</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">contract God &#123;</span><br><span class="line">    event Log(string message);</span><br><span class="line"></span><br><span class="line">    function foo() public virtual &#123;</span><br><span class="line">        emit Log(&quot;God.foo called&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function bar() public virtual &#123;</span><br><span class="line">        emit Log(&quot;God.bar called&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract Adam is God &#123;</span><br><span class="line">    function foo() public virtual override &#123;</span><br><span class="line">        emit Log(&quot;Adam.foo called&quot;);</span><br><span class="line">        super.foo();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function bar() public virtual override &#123;</span><br><span class="line">        emit Log(&quot;Adam.bar called&quot;);</span><br><span class="line">        super.bar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract Eve is God &#123;</span><br><span class="line">    function foo() public virtual override &#123;</span><br><span class="line">        emit Log(&quot;Eve.foo called&quot;);</span><br><span class="line">        super.foo();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function bar() public virtual override &#123;</span><br><span class="line">        emit Log(&quot;Eve.bar called&quot;);</span><br><span class="line">        super.bar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract people is Adam, Eve &#123;</span><br><span class="line">    function foo() public override(Adam, Eve) &#123;</span><br><span class="line">        super.foo();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function bar() public override(Adam, Eve) &#123;</span><br><span class="line">        super.bar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè°ƒç”¨åˆçº¦<code>people</code>ä¸­çš„<code>super.bar()</code>ä¼šä¾æ¬¡è°ƒç”¨<code>Eve</code>ã€<code>Adam</code>ï¼Œæœ€åæ˜¯<code>God</code>åˆçº¦ã€‚</p>
<p>è™½ç„¶<code>Eve</code>ã€<code>Adam</code>éƒ½æ˜¯<code>God</code>çš„å­åˆçº¦ï¼Œä½†æ•´ä¸ªè¿‡ç¨‹ä¸­<code>God</code>åˆçº¦åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚åŸå› æ˜¯<code>Solidity</code>å€Ÿé‰´äº†Pythonçš„æ–¹å¼ï¼Œå¼ºåˆ¶ä¸€ä¸ªç”±åŸºç±»æ„æˆçš„DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰ä½¿å…¶ä¿è¯ä¸€ä¸ªç‰¹å®šçš„é¡ºåºã€‚æ›´å¤šç»†èŠ‚ä½ å¯ä»¥æŸ¥é˜…<a target="_blank" rel="noopener" href="https://solidity-cn.readthedocs.io/zh/develop/contracts.html?highlight=%E7%BB%A7%E6%89%BF#index-16">Solidityçš„å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250126223941045.png" alt="image-20250126223941045"></p>
<h2 id="æŠ½è±¡åˆçº¦å’Œæ¥å£">æŠ½è±¡åˆçº¦å’Œæ¥å£</h2>
<p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬ç”¨<code>ERC721</code>çš„æ¥å£åˆçº¦ä¸ºä¾‹ä»‹ç»<code>Solidity</code>ä¸­çš„æŠ½è±¡åˆçº¦ï¼ˆ<code>abstract</code>ï¼‰å’Œæ¥å£ï¼ˆ<code>interface</code>ï¼‰ï¼Œå¸®åŠ©å¤§å®¶æ›´å¥½çš„ç†è§£<code>ERC721</code>æ ‡å‡†ã€‚</p>
<p><code>ERC-721</code>æ˜¯ä»¥å¤ªåŠç½‘ç»œä¸Šç”¨äº<strong>å®ç°éåŒè´¨åŒ–ä»£å¸ï¼ˆNFTï¼‰çš„æ ‡å‡†ã€‚å®ƒå®šä¹‰äº†ä¸€ç»„è§„åˆ™ï¼Œå…è®¸åˆ›å»ºå…·æœ‰å”¯ä¸€æ€§çš„æ•°å­—èµ„äº§æˆ–ä»£å¸ã€‚ä¸ERC-20æ ‡å‡†çš„åŒè´¨åŒ–ä»£å¸ä¸åŒ</strong>ï¼Œ<code>ERC-721</code>ä»£å¸æ¯ä¸€ä¸ªéƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå¯ä»¥ç”¨æ¥è¡¨ç¤ºè‰ºæœ¯ä½œå“ã€æ”¶è—å“ã€æ¸¸æˆé“å…·ã€æˆ¿åœ°äº§ç­‰ç‹¬ç‰¹çš„èµ„äº§ã€‚</p>
<h3 id="æŠ½è±¡åˆçº¦">æŠ½è±¡åˆçº¦</h3>
<p>å¦‚æœä¸€ä¸ªæ™ºèƒ½åˆçº¦é‡Œè‡³å°‘æœ‰ä¸€ä¸ªæœªå®ç°çš„å‡½æ•°ï¼Œå³æŸä¸ªå‡½æ•°ç¼ºå°‘ä¸»ä½“<code>&#123;&#125;</code>ä¸­çš„å†…å®¹ï¼Œåˆ™å¿…é¡»å°†è¯¥åˆçº¦æ ‡ä¸º<code>abstract</code>ï¼Œä¸ç„¶ç¼–è¯‘ä¼šæŠ¥é”™ï¼›å¦å¤–ï¼Œæœªå®ç°çš„å‡½æ•°éœ€è¦åŠ <code>virtual</code>ï¼Œä»¥ä¾¿å­åˆçº¦é‡å†™ã€‚å¦‚æœæˆ‘ä»¬è¿˜æ²¡æƒ³å¥½å…·ä½“æ€ä¹ˆå®ç°æŸä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠåˆçº¦æ ‡ä¸º<code>abstract</code>ï¼Œä¹‹åè®©åˆ«äººè¡¥å†™ä¸Šã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">abstract contract InsertionSort&#123;</span><br><span class="line">    function insertionSort(uint[] memory a) public pure virtual returns(uint[] memory);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•æŠ½è±¡åˆçº¦çš„ä»£ç <code>Abstract.sol</code>ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.4;</span><br><span class="line">abstract contract Base&#123;</span><br><span class="line">    string public name = &quot;Base&quot;;</span><br><span class="line">    function getAlias() public pure virtual returns(string memory);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract BaseImpl is Base&#123;</span><br><span class="line">    function getAlias() public pure override returns(string memory)&#123;</span><br><span class="line">        return &quot;BaseImpl&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250127032832688.png" alt="image-20250127032832688"></p>
<h3 id="æ¥å£">æ¥å£</h3>
<p>æ¥å£ç±»ä¼¼äºæŠ½è±¡åˆçº¦ï¼Œä½†å®ƒä¸å®ç°ä»»ä½•åŠŸèƒ½ã€‚æ¥å£çš„è§„åˆ™ï¼š</p>
<ol>
<li><strong>ä¸èƒ½åŒ…å«çŠ¶æ€å˜é‡</strong></li>
<li><strong>ä¸èƒ½åŒ…å«æ„é€ å‡½æ•°</strong></li>
<li><strong>ä¸èƒ½ç»§æ‰¿é™¤æ¥å£å¤–çš„å…¶ä»–åˆçº¦</strong></li>
<li><strong>æ‰€æœ‰å‡½æ•°éƒ½å¿…é¡»æ˜¯externalä¸”ä¸èƒ½æœ‰å‡½æ•°ä½“</strong></li>
<li><strong>ç»§æ‰¿æ¥å£çš„éæŠ½è±¡åˆçº¦å¿…é¡»å®ç°æ¥å£å®šä¹‰çš„æ‰€æœ‰åŠŸèƒ½</strong></li>
</ol>
<p>è™½ç„¶æ¥å£ä¸å®ç°ä»»ä½•åŠŸèƒ½ï¼Œä½†å®ƒéå¸¸é‡è¦ã€‚æ¥å£æ˜¯æ™ºèƒ½åˆçº¦çš„éª¨æ¶ï¼Œå®šä¹‰äº†åˆçº¦çš„åŠŸèƒ½ä»¥åŠå¦‚ä½•è§¦å‘å®ƒä»¬ã€‚</p>
<p>å¦‚æœæ™ºèƒ½åˆçº¦å®ç°äº†æŸç§æ¥å£ï¼ˆæ¯”å¦‚<code>ERC20</code>æˆ–<code>ERC721</code>ï¼‰ï¼Œå…¶ä»–Dappså’Œæ™ºèƒ½åˆçº¦å°±çŸ¥é“å¦‚ä½•ä¸å®ƒäº¤äº’ã€‚</p>
<p>å› ä¸ºæ¥å£æä¾›äº†ä¸¤ä¸ªé‡è¦çš„ä¿¡æ¯ï¼š</p>
<ol>
<li>åˆçº¦é‡Œæ¯ä¸ªå‡½æ•°çš„<code>bytes4</code>é€‰æ‹©å™¨ï¼Œä»¥åŠå‡½æ•°ç­¾å<code>å‡½æ•°å(æ¯ä¸ªå‚æ•°ç±»å‹ï¼‰</code>ã€‚</li>
<li>æ¥å£idï¼ˆæ›´å¤šä¿¡æ¯è§<a target="_blank" rel="noopener" href="https://eips.ethereum.org/EIPS/eip-165">EIP165</a>ï¼‰</li>
</ol>
<p>å¦å¤–ï¼Œæ¥å£ä¸åˆçº¦<code>ABI</code>ï¼ˆApplication Binary Interfaceï¼‰ç­‰ä»·ï¼Œå¯ä»¥ç›¸äº’è½¬æ¢ï¼šç¼–è¯‘æ¥å£å¯ä»¥å¾—åˆ°åˆçº¦çš„<code>ABI</code>ï¼Œåˆ©ç”¨<a target="_blank" rel="noopener" href="https://gnidan.github.io/abi-to-sol/">abi-to-solå·¥å…·</a>ï¼Œä¹Ÿå¯ä»¥å°†<code>ABI json</code>æ–‡ä»¶è½¬æ¢ä¸º<code>æ¥å£sol</code>æ–‡ä»¶ã€‚</p>
<p>æˆ‘ä»¬ä»¥<code>ERC721</code>æ¥å£åˆçº¦<code>IERC721</code>ä¸ºä¾‹ï¼Œå®ƒå®šä¹‰äº†3ä¸ª<code>event</code>å’Œ9ä¸ª<code>function</code>ï¼Œæ‰€æœ‰<code>ERC721</code>æ ‡å‡†çš„NFTéƒ½å®ç°äº†è¿™äº›å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¥å£å’Œå¸¸è§„åˆçº¦çš„åŒºåˆ«åœ¨äºæ¯ä¸ªå‡½æ•°éƒ½ä»¥<code>;</code>ä»£æ›¿å‡½æ•°ä½“<code>&#123; &#125;</code>ç»“å°¾ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">interface IERC721 is IERC165 &#123;</span><br><span class="line">    event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);</span><br><span class="line">    event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId);</span><br><span class="line">    event ApprovalForAll(address indexed owner, address indexed operator, bool approved);</span><br><span class="line">    </span><br><span class="line">    function balanceOf(address owner) external view returns (uint256 balance);</span><br><span class="line"></span><br><span class="line">    function ownerOf(uint256 tokenId) external view returns (address owner);</span><br><span class="line"></span><br><span class="line">    function safeTransferFrom(address from, address to, uint256 tokenId) external;</span><br><span class="line"></span><br><span class="line">    function transferFrom(address from, address to, uint256 tokenId) external;</span><br><span class="line"></span><br><span class="line">    function approve(address to, uint256 tokenId) external;</span><br><span class="line"></span><br><span class="line">    function getApproved(uint256 tokenId) external view returns (address operator);</span><br><span class="line"></span><br><span class="line">    function setApprovalForAll(address operator, bool _approved) external;</span><br><span class="line"></span><br><span class="line">    function isApprovedForAll(address owner, address operator) external view returns (bool);</span><br><span class="line"></span><br><span class="line">    function safeTransferFrom( address from, address to, uint256 tokenId, bytes calldata data) external;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•æ¥å£çš„ä»£ç <code>Interface.sol</code>ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.4;</span><br><span class="line">interface Base&#123;</span><br><span class="line">    function getFirstName() external pure returns (string memory);</span><br><span class="line">    function getLastName() external pure returns (string memory);</span><br><span class="line">&#125;</span><br><span class="line">contract BaseImpl is Base&#123;</span><br><span class="line">    function getFirstName() external pure override returns(string memory)&#123;</span><br><span class="line">        return &quot;Amazing&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    function getLastName() external pure override returns(string memory)&#123;</span><br><span class="line">        return &quot;Ang&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250127121544577.png" alt="image-20250127121544577"></p>
<h3 id="IERC721äº‹ä»¶">IERC721äº‹ä»¶</h3>
<p><code>IERC721</code>åŒ…å«3ä¸ªäº‹ä»¶ï¼Œå…¶ä¸­<code>Transfer</code>å’Œ<code>Approval</code>äº‹ä»¶åœ¨<code>ERC20</code>ä¸­ä¹Ÿæœ‰ã€‚</p>
<ul>
<li><code>Transfer</code>äº‹ä»¶ï¼šåœ¨è½¬è´¦æ—¶è¢«é‡Šæ”¾ï¼Œè®°å½•ä»£å¸çš„å‘å‡ºåœ°å€<code>from</code>ï¼Œæ¥æ”¶åœ°å€<code>to</code>å’Œ<code>tokenId</code>ã€‚</li>
<li><code>Approval</code>äº‹ä»¶ï¼šåœ¨æˆæƒæ—¶è¢«é‡Šæ”¾ï¼Œè®°å½•æˆæƒåœ°å€<code>owner</code>ï¼Œè¢«æˆæƒåœ°å€<code>approved</code>å’Œ<code>tokenId</code>ã€‚</li>
<li><code>ApprovalForAll</code>äº‹ä»¶ï¼šåœ¨æ‰¹é‡æˆæƒæ—¶è¢«é‡Šæ”¾ï¼Œè®°å½•æ‰¹é‡æˆæƒçš„å‘å‡ºåœ°å€<code>owner</code>ï¼Œè¢«æˆæƒåœ°å€<code>operator</code>å’Œæˆæƒä¸å¦çš„<code>approved</code>ã€‚</li>
</ul>
<h3 id="IERC721å‡½æ•°">IERC721å‡½æ•°</h3>
<ul>
<li><code>balanceOf</code>ï¼šè¿”å›æŸåœ°å€çš„NFTæŒæœ‰é‡<code>balance</code>ã€‚</li>
<li><code>ownerOf</code>ï¼šè¿”å›æŸ<code>tokenId</code>çš„ä¸»äºº<code>owner</code>ã€‚</li>
<li><code>transferFrom</code>ï¼šæ™®é€šè½¬è´¦ï¼Œå‚æ•°ä¸ºè½¬å‡ºåœ°å€<code>from</code>ï¼Œæ¥æ”¶åœ°å€<code>to</code>å’Œ<code>tokenId</code>ã€‚</li>
<li><code>safeTransferFrom</code>ï¼šå®‰å…¨è½¬è´¦ï¼ˆå¦‚æœæ¥æ”¶æ–¹æ˜¯åˆçº¦åœ°å€ï¼Œä¼šè¦æ±‚å®ç°<code>ERC721Receiver</code>æ¥å£ï¼‰ã€‚å‚æ•°ä¸ºè½¬å‡ºåœ°å€<code>from</code>ï¼Œæ¥æ”¶åœ°å€<code>to</code>å’Œ<code>tokenId</code>ã€‚</li>
<li><code>approve</code>ï¼šæˆæƒå¦ä¸€ä¸ªåœ°å€ä½¿ç”¨ä½ çš„NFTã€‚å‚æ•°ä¸ºè¢«æˆæƒåœ°å€<code>approve</code>å’Œ<code>tokenId</code>ã€‚</li>
<li><code>getApproved</code>ï¼šæŸ¥è¯¢<code>tokenId</code>è¢«æ‰¹å‡†ç»™äº†å“ªä¸ªåœ°å€ã€‚</li>
<li><code>setApprovalForAll</code>ï¼šå°†è‡ªå·±æŒæœ‰çš„è¯¥ç³»åˆ—NFTæ‰¹é‡æˆæƒç»™æŸä¸ªåœ°å€<code>operator</code>ã€‚</li>
<li><code>isApprovedForAll</code>ï¼šæŸ¥è¯¢æŸåœ°å€çš„NFTæ˜¯å¦æ‰¹é‡æˆæƒç»™äº†å¦ä¸€ä¸ª<code>operator</code>åœ°å€ã€‚</li>
<li><code>safeTransferFrom</code>ï¼šå®‰å…¨è½¬è´¦çš„é‡è½½å‡½æ•°ï¼Œå‚æ•°é‡Œé¢åŒ…å«äº†<code>data</code>ã€‚</li>
</ul>
<h3 id="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ¥å£ï¼Ÿ">ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ¥å£ï¼Ÿ</h3>
<p>å¦‚æœæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªåˆçº¦å®ç°äº†<code>IERC721</code>æ¥å£ï¼Œæˆ‘ä»¬ä¸éœ€è¦çŸ¥é“å®ƒå…·ä½“ä»£ç å®ç°ï¼Œå°±å¯ä»¥ä¸å®ƒäº¤äº’ã€‚</p>
<p>æ— èŠçŒ¿<code>BAYC</code>å±äº<code>ERC721</code>ä»£å¸ï¼Œå®ç°äº†<code>IERC721</code>æ¥å£çš„åŠŸèƒ½ã€‚æˆ‘ä»¬ä¸éœ€è¦çŸ¥é“å®ƒçš„æºä»£ç ï¼Œåªéœ€çŸ¥é“å®ƒçš„åˆçº¦åœ°å€ï¼Œç”¨<code>IERC721</code>æ¥å£å°±å¯ä»¥ä¸å®ƒäº¤äº’ï¼Œæ¯”å¦‚ç”¨<code>balanceOf()</code>æ¥æŸ¥è¯¢æŸä¸ªåœ°å€çš„<code>BAYC</code>ä½™é¢ï¼Œç”¨<code>safeTransferFrom()</code>æ¥è½¬è´¦<code>BAYC</code>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">contract interactBAYC &#123;</span><br><span class="line">    // åˆ©ç”¨BAYCåœ°å€åˆ›å»ºæ¥å£åˆçº¦å˜é‡ï¼ˆETHä¸»ç½‘ï¼‰</span><br><span class="line">    IERC721 BAYC = IERC721(0xBC4CA0EdA7647A8aB7C2061c2E118A18a936f13D);</span><br><span class="line"></span><br><span class="line">    // é€šè¿‡æ¥å£è°ƒç”¨BAYCçš„balanceOf()æŸ¥è¯¢æŒä»“é‡</span><br><span class="line">    function balanceOfBAYC(address owner) external view returns (uint256 balance)&#123;</span><br><span class="line">        return BAYC.balanceOf(owner);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // é€šè¿‡æ¥å£è°ƒç”¨BAYCçš„safeTransferFrom()å®‰å…¨è½¬è´¦</span><br><span class="line">    function safeTransferFromBAYC(address from, address to, uint256 tokenId) external&#123;</span><br><span class="line">        BAYC.safeTransferFrom(from, to, tokenId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¼‚å¸¸">å¼‚å¸¸</h2>
<p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬ä»‹ç»<code>Solidity</code>ä¸‰ç§æŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ï¼š<code>error</code>ï¼Œ<code>require</code>å’Œ<code>assert</code>ï¼Œå¹¶æ¯”è¾ƒä¸‰ç§æ–¹æ³•çš„<code>gas</code>æ¶ˆè€—ã€‚</p>
<h3 id="å¼‚å¸¸-2">å¼‚å¸¸</h3>
<p>å†™æ™ºèƒ½åˆçº¦ç»å¸¸ä¼šå‡º<code>bug</code>ï¼Œ<code>Solidity</code>ä¸­çš„å¼‚å¸¸å‘½ä»¤å¸®åŠ©æˆ‘ä»¬<code>debug</code>ã€‚</p>
<p>æµ‹è¯•ä»£ç <code>Error.sol</code>ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.21;</span><br><span class="line"></span><br><span class="line">// Gas coståœ¨Remixä¸­æµ‹è¯•å¾—åˆ° ä½¿ç”¨0.8.26ç‰ˆæœ¬ç¼–è¯‘</span><br><span class="line">// å‚æ•°ä½¿ç”¨ tokenId = 123, address = &#123;any address&#125;</span><br><span class="line"></span><br><span class="line">// è‡ªå®šä¹‰error</span><br><span class="line">//error TransferNotOwner();</span><br><span class="line"></span><br><span class="line">error TransferNotOwner(address sender);</span><br><span class="line"></span><br><span class="line">contract Errors &#123;</span><br><span class="line">    // ä¸€ç»„æ˜ å°„ï¼Œè®°å½•æ¯ä¸ªTokenIdçš„Owner</span><br><span class="line">    mapping(uint256 =&gt; address) private _owners;</span><br><span class="line"></span><br><span class="line">    // Erroræ–¹æ³•: gas cost 24095</span><br><span class="line">    // Erroræ–¹æ³•: gas cost 24113</span><br><span class="line">    function transferOwner1(uint256 tokenId, address newOwner) public &#123;</span><br><span class="line">        if (_owners[tokenId] != msg.sender) &#123;</span><br><span class="line">            //revert TransferNotOwner();</span><br><span class="line">            revert TransferNotOwner(msg.sender);</span><br><span class="line">        &#125;</span><br><span class="line">        _owners[tokenId] = newOwner;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // requireæ–¹æ³•: gas cost 24211</span><br><span class="line">    function transferOwner2(uint256 tokenId, address newOwner) public &#123;</span><br><span class="line">        require(_owners[tokenId] == msg.sender, &quot;Transfer Not Owner&quot;);</span><br><span class="line">        _owners[tokenId] = newOwner;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // assertæ–¹æ³•: gas cost 24109</span><br><span class="line">    function transferOwner3(uint256 tokenId, address newOwner) public &#123;</span><br><span class="line">        assert(_owners[tokenId] == msg.sender);</span><br><span class="line">        _owners[tokenId] = newOwner;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Error">Error</h3>
<p><code>error</code>æ˜¯<code>solidity 0.8.4ç‰ˆæœ¬</code>æ–°åŠ çš„å†…å®¹ï¼Œæ–¹ä¾¿ä¸”é«˜æ•ˆï¼ˆçœ<code>gas</code>ï¼‰åœ°å‘ç”¨æˆ·è§£é‡Šæ“ä½œå¤±è´¥çš„åŸå› ï¼ŒåŒæ—¶è¿˜å¯ä»¥åœ¨æŠ›å‡ºå¼‚å¸¸çš„åŒæ—¶æºå¸¦å‚æ•°ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°è°ƒè¯•ã€‚äººä»¬å¯ä»¥åœ¨<code>contract</code>ä¹‹å¤–å®šä¹‰å¼‚å¸¸ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>TransferNotOwner</code>å¼‚å¸¸ï¼Œå½“ç”¨æˆ·ä¸æ˜¯ä»£å¸<code>owner</code>çš„æ—¶å€™å°è¯•è½¬è´¦ï¼Œä¼šæŠ›å‡ºé”™è¯¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error TransferNotOwner(); // è‡ªå®šä¹‰error</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰ä¸€ä¸ªæºå¸¦å‚æ•°çš„å¼‚å¸¸ï¼Œæ¥æç¤ºå°è¯•è½¬è´¦çš„è´¦æˆ·åœ°å€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error TransferNotOwner(address sender); // è‡ªå®šä¹‰çš„å¸¦å‚æ•°çš„error</span><br></pre></td></tr></table></figure>
<p>åœ¨æ‰§è¡Œå½“ä¸­ï¼Œ<code>error</code>å¿…é¡»æ­é…<code>revert</code>ï¼ˆå›é€€ï¼‰å‘½ä»¤ä½¿ç”¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function transferOwner1(uint256 tokenId, address newOwner) public &#123;</span><br><span class="line">    if(_owners[tokenId] != msg.sender)&#123;</span><br><span class="line">        revert TransferNotOwner();</span><br><span class="line">        // revert TransferNotOwner(msg.sender);</span><br><span class="line">    &#125;</span><br><span class="line">    _owners[tokenId] = newOwner;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>transferOwner1()</code>å‡½æ•°ï¼Œå®ƒä¼šæ£€æŸ¥ä»£å¸çš„<code>owner</code>æ˜¯ä¸æ˜¯å‘èµ·äººï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±ä¼šæŠ›å‡º<code>TransferNotOwner</code>å¼‚å¸¸ï¼›å¦‚æœæ˜¯çš„è¯ï¼Œå°±ä¼šè½¬è´¦ã€‚</p>
<p>ä¸å¸¦å‚æ•°çš„<code>error</code>ï¼Œæ¶ˆè€—<code>gas</code>é‡ä¸º<code>24095</code></p>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250127123837474.png" alt="image-20250127123837474"></p>
<p>å¸¦å‚æ•°çš„<code>error</code>ï¼Œæ¶ˆè€—<code>gas</code>é‡ä¸º<code>24113</code></p>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250127124300009.png" alt="image-20250127124300009"></p>
<h3 id="Require">Require</h3>
<p><code>require</code>å‘½ä»¤æ˜¯<code>solidity 0.8ç‰ˆæœ¬</code>ä¹‹å‰æŠ›å‡ºå¼‚å¸¸çš„å¸¸ç”¨æ–¹æ³•ï¼Œç›®å‰å¾ˆå¤šä¸»æµåˆçº¦ä»ç„¶è¿˜åœ¨ä½¿ç”¨å®ƒã€‚å®ƒå¾ˆå¥½ç”¨ï¼Œå”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯<code>gas</code>éšç€æè¿°å¼‚å¸¸çš„å­—ç¬¦ä¸²é•¿åº¦å¢åŠ ï¼Œæ¯”<code>error</code>å‘½ä»¤è¦é«˜ã€‚ä½¿ç”¨æ–¹æ³•ï¼š<code>require(æ£€æŸ¥æ¡ä»¶ï¼Œ&quot;å¼‚å¸¸çš„æè¿°&quot;)</code>ï¼Œ<strong>å½“æ£€æŸ¥æ¡ä»¶ä¸æˆç«‹çš„æ—¶å€™ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</strong></p>
<p>æˆ‘ä»¬ç”¨<code>require</code>å‘½ä»¤é‡å†™ä¸€ä¸‹ä¸Šé¢çš„<code>transferOwner1</code>å‡½æ•°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function transferOwner2(uint256 tokenId, address newOwner) public &#123;</span><br><span class="line">    require(_owners[tokenId] == msg.sender, &quot;Transfer Not Owner&quot;);</span><br><span class="line">    _owners[tokenId] = newOwner;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>require</code>æ¶ˆè€—<code>gas</code>çš„é‡ä¸º<code>24211</code></p>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250127125601300.png" alt="image-20250127125601300"></p>
<h3 id="Assert">Assert</h3>
<p><code>assert</code>å‘½ä»¤ä¸€èˆ¬ç”¨äºç¨‹åºå‘˜å†™ç¨‹åº<code>debug</code>ï¼Œå› ä¸ºå®ƒä¸èƒ½è§£é‡ŠæŠ›å‡ºå¼‚å¸¸çš„åŸå› ï¼ˆæ¯”<code>require</code>å°‘ä¸ªå­—ç¬¦ä¸²ï¼‰ã€‚å®ƒçš„ç”¨æ³•å¾ˆç®€å•ï¼Œ<code>assert(æ£€æŸ¥æ¡ä»¶ï¼‰</code>ï¼Œ<strong>å½“æ£€æŸ¥æ¡ä»¶ä¸æˆç«‹çš„æ—¶å€™ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</strong></p>
<p>æˆ‘ä»¬ç”¨<code>assert</code>å‘½ä»¤é‡å†™ä¸€ä¸‹ä¸Šé¢çš„<code>transferOwner1</code>å‡½æ•°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function transferOwner3(uint256 tokenId, address newOwner) public &#123;</span><br><span class="line">    assert(_owners[tokenId] == msg.sender);</span><br><span class="line">    _owners[tokenId] = newOwner;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>assert</code>æ¶ˆè€—<code>gas</code>çš„é‡ä¸º<code>24109</code></p>
<p><img src="/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20250127130047597.png" alt="image-20250127130047597"></p>
<h3 id="ä¸‰ç§æ–¹æ³•çš„gasæ¯”è¾ƒ">ä¸‰ç§æ–¹æ³•çš„gasæ¯”è¾ƒ</h3>
<p>æˆ‘ä»¬æ¯”è¾ƒä¸€ä¸‹ä¸‰ç§æŠ›å‡ºå¼‚å¸¸çš„<code>gas</code>æ¶ˆè€—ï¼ŒæŸ¥è¯¢<code>gas</code>çš„æ¶ˆè€— ï¼ˆä½¿ç”¨0.8.26ç‰ˆæœ¬ç¼–è¯‘ï¼‰</p>
<ol>
<li><code>error</code>æ–¹æ³•<code>gas</code>æ¶ˆè€—ï¼š24095 (åŠ å…¥å‚æ•°å<code>gas</code>æ¶ˆè€—ï¼š24113)</li>
<li><code>require</code>æ–¹æ³•<code>gas</code>æ¶ˆè€—ï¼š24211</li>
<li><code>assert</code>æ–¹æ³•<code>gas</code>æ¶ˆè€—ï¼š24109</li>
</ol>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>error</code>æ–¹æ³•<code>gas</code>æœ€å°‘ï¼Œå…¶æ¬¡æ˜¯<code>assert</code>ï¼Œ<code>require</code>æ–¹æ³•æ¶ˆè€—<code>gas</code>æœ€å¤šï¼å› æ­¤ï¼Œ<code>error</code>æ—¢å¯ä»¥å‘ŠçŸ¥ç”¨æˆ·æŠ›å‡ºå¼‚å¸¸çš„åŸå› ï¼Œåˆèƒ½çœ<code>gas</code>ï¼Œå¤§å®¶è¦å¤šç”¨ï¼ï¼ˆæ³¨æ„ï¼Œç”±äºéƒ¨ç½²æµ‹è¯•æ—¶é—´çš„ä¸åŒï¼Œæ¯ä¸ªå‡½æ•°çš„<code>gas</code>æ¶ˆè€—ä¼šæœ‰æ‰€ä¸åŒï¼Œä½†æ˜¯æ¯”è¾ƒç»“æœä¼šæ˜¯ä¸€è‡´çš„ã€‚ï¼‰</p>
<p><strong>å¤‡æ³¨:</strong> Solidity 0.8.0ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œ<code>assert</code>æŠ›å‡ºçš„æ˜¯ä¸€ä¸ª <code>panic exception</code>ï¼Œä¼šæŠŠå‰©ä½™çš„ <code>gas</code> å…¨éƒ¨æ¶ˆè€—ï¼Œä¸ä¼šè¿”è¿˜ã€‚æ›´å¤šç»†èŠ‚è§<a target="_blank" rel="noopener" href="https://docs.soliditylang.org/en/v0.8.17/control-structures.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a target="_blank" rel="noopener" href="https://www.wtf.academy/docs/solidity-101/HelloWeb3">https://www.wtf.academy/docs/solidity-101/HelloWeb3</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/AmazingAng/WTF-Solidity">https://github.com/AmazingAng/WTF-Solidity</a></p>
<p><a target="_blank" rel="noopener" href="https://learnblockchain.cn/docs/ethers.js/api.html">https://learnblockchain.cn/docs/ethers.js/api.html</a></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a href="/tags/">Tag</a></li>
        
          <li><a href="/categories/">Category</a></li>
        
          <li><a href="/search/">Search</a></li>
        
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E6%B5%81"><span class="toc-number">1.</span> <span class="toc-text">æ§åˆ¶æµ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E6%B5%81-2"><span class="toc-number">1.1.</span> <span class="toc-text">æ§åˆ¶æµ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%92%8C%E4%BF%AE%E9%A5%B0%E5%99%A8"><span class="toc-number">2.</span> <span class="toc-text">æ„é€ å‡½æ•°å’Œä¿®é¥°å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">2.1.</span> <span class="toc-text">æ„é€ å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E9%A5%B0%E5%99%A8"><span class="toc-number">2.2.</span> <span class="toc-text">ä¿®é¥°å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95"><span class="toc-number">2.3.</span> <span class="toc-text">è¿è¡Œæµ‹è¯•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">äº‹ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-2"><span class="toc-number">3.1.</span> <span class="toc-text">äº‹ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.2.</span> <span class="toc-text">å£°æ˜äº‹ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8A%E6%94%BE%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.3.</span> <span class="toc-text">é‡Šæ”¾äº‹ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EVM%E6%97%A5%E5%BF%97-Log"><span class="toc-number">3.4.</span> <span class="toc-text">EVMæ—¥å¿—(Log)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98-Topics"><span class="toc-number">3.5.</span> <span class="toc-text">ä¸»é¢˜(Topics)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE-Data"><span class="toc-number">3.6.</span> <span class="toc-text">æ•°æ®(Data)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">4.</span> <span class="toc-text">ç»§æ‰¿</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF-2"><span class="toc-number">4.1.</span> <span class="toc-text">ç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%84%E5%88%99"><span class="toc-number">4.2.</span> <span class="toc-text">è§„åˆ™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%BB%A7%E6%89%BF"><span class="toc-number">4.3.</span> <span class="toc-text">ç®€å•ç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF"><span class="toc-number">4.4.</span> <span class="toc-text">å¤šé‡ç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E9%A5%B0%E5%99%A8%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="toc-number">4.5.</span> <span class="toc-text">ä¿®é¥°å™¨çš„ç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="toc-number">4.6.</span> <span class="toc-text">æ„é€ å‡½æ•°çš„ç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E7%88%B6%E5%90%88%E7%BA%A6%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">4.7.</span> <span class="toc-text">è°ƒç”¨çˆ¶åˆçº¦çš„å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%92%BB%E7%9F%B3%E7%BB%A7%E6%89%BF"><span class="toc-number">4.8.</span> <span class="toc-text">é’»çŸ³ç»§æ‰¿</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E5%90%88%E7%BA%A6%E5%92%8C%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.</span> <span class="toc-text">æŠ½è±¡åˆçº¦å’Œæ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E5%90%88%E7%BA%A6"><span class="toc-number">5.1.</span> <span class="toc-text">æŠ½è±¡åˆçº¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.2.</span> <span class="toc-text">æ¥å£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IERC721%E4%BA%8B%E4%BB%B6"><span class="toc-number">5.3.</span> <span class="toc-text">IERC721äº‹ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IERC721%E5%87%BD%E6%95%B0"><span class="toc-number">5.4.</span> <span class="toc-text">IERC721å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3%EF%BC%9F"><span class="toc-number">5.5.</span> <span class="toc-text">ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ¥å£ï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8"><span class="toc-number">6.</span> <span class="toc-text">å¼‚å¸¸</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8-2"><span class="toc-number">6.1.</span> <span class="toc-text">å¼‚å¸¸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Error"><span class="toc-number">6.2.</span> <span class="toc-text">Error</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Require"><span class="toc-number">6.3.</span> <span class="toc-text">Require</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Assert"><span class="toc-number">6.4.</span> <span class="toc-text">Assert</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95%E7%9A%84gas%E6%AF%94%E8%BE%83"><span class="toc-number">6.5.</span> <span class="toc-text">ä¸‰ç§æ–¹æ³•çš„gasæ¯”è¾ƒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">7.</span> <span class="toc-text">å‚è€ƒ</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&text=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&title=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&is_video=false&description=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Solidityå…¥é—¨å­¦ä¹ (äºŒ)&body=Check out this article: https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&title=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&title=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&title=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&title=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&name=Solidityå…¥é—¨å­¦ä¹ (äºŒ)&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://x2nn.github.io/2025/01/26/Solidity%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/&t=Solidityå…¥é—¨å­¦ä¹ (äºŒ)"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
      <div class="footer-left">
        Copyright &copy;
        
        
        2024-2025
        ğŸ’—
      </div>
      <div class="footer-right">
        <nav>
          <ul>
            <!--
          --><li><a href="/">Home</a></li><!--
        --><!--
          --><li><a href="/archives/">Writing</a></li><!--
        --><!--
          --><li><a href="/tags/">Tag</a></li><!--
        --><!--
          --><li><a href="/categories/">Category</a></li><!--
        --><!--
          --><li><a href="/search/">Search</a></li><!--
        --><!--
          --><li><a href="/about/">About</a></li><!--
        -->
          </ul>
          <ul>
            
              <!-- ä¸è’œå­ç»Ÿè®¡ -->
              <span id="busuanzi_container_site_pv">
                  æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
              </span>
              <span class="post-meta-divider">|</span>
              <span id="busuanzi_container_site_uv" style='display:none'>
                      æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº
              </span>
            <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            
          </ul>
        </nav>
      </div>
      
</footer>


    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
